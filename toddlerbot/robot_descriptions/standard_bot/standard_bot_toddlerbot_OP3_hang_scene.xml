<mujoco model="sbot scene">
  <include file="standard_bot.xml"/>

  <statistic center="0.3 0 0.4" extent="0.8" meansize="0.05"/>

  <visual>
    <headlight diffuse="0.6 0.6 0.6" ambient="0.1 0.1 0.1" specular="0 0 0"/>
    <global azimuth="120" elevation="-20"/>
  </visual>

  <asset>
    <texture name="grid" type="2d" builtin="checker" rgb1=".2 .3 .4" rgb2=".1 0.15 0.2" width="512" height="512"
      mark="cross" markrgb=".8 .8 .8"/>
    <material name="grid" texture="grid" texrepeat="1 1" texuniform="true"/>
   <!-- toddler meshes -->
    <mesh name="torso_visual" file="../assemblies/toddlerbot/meshes/torso_visual.stl" />
    <mesh name="spur_1m_20t_visual" file="../assemblies/toddlerbot/meshes/spur_1m_20t_visual.stl" />
    <mesh name="neck_yaw_link_visual" file="../assemblies/toddlerbot/meshes/neck_yaw_link_visual.stl" />
    <mesh name="neck_pitch_link_visual" file="../assemblies/toddlerbot/meshes/neck_pitch_link_visual.stl" />
    <mesh name="spur_gear_(13_teeth)_visual" file="../assemblies/toddlerbot/meshes/spur_gear_(13_teeth)_visual.stl" />
    <mesh name="waist_gears_visual" file="../assemblies/toddlerbot/meshes/waist_gears_visual.stl" />
    <mesh name="waist_link_visual" file="../assemblies/toddlerbot/meshes/waist_link_visual.stl" />
    <mesh name="spiral_bevel_1m_14t_30deg_visual" file="../assemblies/toddlerbot/meshes/spiral_bevel_1m_14t_30deg_visual.stl" />
    <mesh name="spiral_bevel_1m_14t_30deg_2_visual" file="../assemblies/toddlerbot/meshes/spiral_bevel_1m_14t_30deg_2_visual.stl" />
    <mesh name="spur_gear_19_teeth_visual" file="../assemblies/toddlerbot/meshes/spur_gear_19_teeth_visual.stl" />
    <mesh name="spur_gear_21_teeth_visual" file="../assemblies/toddlerbot/meshes/spur_gear_21_teeth_visual.stl" />
    <mesh name="spur_gear_19_teeth_2_visual" file="../assemblies/toddlerbot/meshes/spur_gear_19_teeth_2_visual.stl" />
    <mesh name="spur_gear_21_teeth_2_visual" file="../assemblies/toddlerbot/meshes/spur_gear_21_teeth_2_visual.stl" />
    <mesh name="left_hip_yaw_link_visual" file="../assemblies/left_leg_OP3/meshes/left_hip_yaw_link_visual.stl" />
    <mesh name="left_hip_roll_link_visual" file="../assemblies/left_leg_OP3/meshes/left_hip_roll_link_visual.stl" />
    <mesh name="left_hip_pitch_link_xm430_visual" file="../assemblies/left_leg_OP3/meshes/left_hip_pitch_link_xm430_visual.stl" />
    <mesh name="left_calf_link_visual" file="../assemblies/left_leg_OP3/meshes/left_calf_link_visual.stl" />
    <mesh name="left_bearing_683_visual" file="../assemblies/left_leg_OP3/meshes/left_bearing_683_visual.stl" />
    <mesh name="left_bearing_683_2_visual" file="../assemblies/left_leg_OP3/meshes/left_bearing_683_2_visual.stl" />
    <mesh name="left_ank_pitch_link_visual" file="../assemblies/left_leg_OP3/meshes/left_ank_pitch_link_visual.stl" />
    <mesh name="left_ank_roll_link_visual" file="../assemblies/left_leg_OP3/meshes/left_ank_roll_link_visual.stl" />
    <mesh name="left_xm430_plate_visual" file="../assemblies/left_leg_OP3/meshes/left_xm430_plate_visual.stl" />
    <mesh name="left_knee_rod_visual" file="../assemblies/left_leg_OP3/meshes/left_knee_rod_visual.stl" />
    <mesh name="left_knee_rod_2_visual" file="../assemblies/left_leg_OP3/meshes/left_knee_rod_2_visual.stl" />
    <mesh name="right_hip_yaw_link_visual" file="../assemblies/right_leg_OP3/meshes/right_hip_yaw_link_visual.stl" />
    <mesh name="right_hip_roll_link_visual" file="../assemblies/right_leg_OP3/meshes/right_hip_roll_link_visual.stl" />
    <mesh name="right_hip_pitch_link_xm430_visual" file="../assemblies/right_leg_OP3/meshes/right_hip_pitch_link_xm430_visual.stl" />
    <mesh name="right_calf_link_visual" file="../assemblies/right_leg_OP3/meshes/right_calf_link_visual.stl" />
    <mesh name="right_bearing_683_visual" file="../assemblies/right_leg_OP3/meshes/right_bearing_683_visual.stl" />
    <mesh name="right_bearing_683_2_visual" file="../assemblies/right_leg_OP3/meshes/right_bearing_683_2_visual.stl" />
    <mesh name="right_ank_pitch_link_visual" file="../assemblies/right_leg_OP3/meshes/right_ank_pitch_link_visual.stl" />
    <mesh name="right_ank_roll_link_visual" file="../assemblies/right_leg_OP3/meshes/right_ank_roll_link_visual.stl" />
    <mesh name="right_xm430_plate_visual" file="../assemblies/right_leg_OP3/meshes/right_xm430_plate_visual.stl" />
    <mesh name="right_knee_rod_visual" file="../assemblies/right_leg_OP3/meshes/right_knee_rod_visual.stl" />
    <mesh name="right_knee_rod_2_visual" file="../assemblies/right_leg_OP3/meshes/right_knee_rod_2_visual.stl" />
    <mesh name="left_sho_pitch_link_visual" file="../assemblies/left_arm_umi/meshes/left_sho_pitch_link_visual.stl" />
    <mesh name="left_2xl430_gears_visual" file="../assemblies/left_arm_umi/meshes/left_2xl430_gears_visual.stl" />
    <mesh name="left_spur_1m_24t_drive_visual" file="../assemblies/left_arm_umi/meshes/left_spur_1m_24t_drive_visual.stl" />
    <mesh name="left_spur_1m_24t_driven_visual" file="../assemblies/left_arm_umi/meshes/left_spur_1m_24t_driven_visual.stl" />
    <mesh name="left_sho_yaw_link_visual" file="../assemblies/left_arm_umi/meshes/left_sho_yaw_link_visual.stl" />
    <mesh name="left_2xl430_gears_2_visual" file="../assemblies/left_arm_umi/meshes/left_2xl430_gears_2_visual.stl" />
    <mesh name="left_spur_1m_24t_drive_2_visual" file="../assemblies/left_arm_umi/meshes/left_spur_1m_24t_drive_2_visual.stl" />
    <mesh name="left_spur_1m_24t_driven_2_visual" file="../assemblies/left_arm_umi/meshes/left_spur_1m_24t_driven_2_visual.stl" />
    <mesh name="left_elb_yaw_link_visual" file="../assemblies/left_arm_umi/meshes/left_elb_yaw_link_visual.stl" />
    <mesh name="left_spur_1m_24t_driven_3_visual" file="../assemblies/left_arm_umi/meshes/left_spur_1m_24t_driven_3_visual.stl" />
    <mesh name="left_2xl430_gears_3_visual" file="../assemblies/left_arm_umi/meshes/left_2xl430_gears_3_visual.stl" />
    <mesh name="left_spur_1m_24t_drive_3_visual" file="../assemblies/left_arm_umi/meshes/left_spur_1m_24t_drive_3_visual.stl" />
    <mesh name="left_hand_visual" file="../assemblies/left_arm_umi/meshes/left_hand_visual.stl" />
    <mesh name="left_wrist_bearing_plate_visual" file="../assemblies/left_arm_umi/meshes/left_wrist_bearing_plate_visual.stl" />
    <mesh name="right_sho_pitch_link_visual" file="../assemblies/right_arm_umi/meshes/right_sho_pitch_link_visual.stl" />
    <mesh name="right_2xl430_gears_visual" file="../assemblies/right_arm_umi/meshes/right_2xl430_gears_visual.stl" />
    <mesh name="right_spur_1m_24t_drive_visual" file="../assemblies/right_arm_umi/meshes/right_spur_1m_24t_drive_visual.stl" />
    <mesh name="right_spur_1m_24t_driven_visual" file="../assemblies/right_arm_umi/meshes/right_spur_1m_24t_driven_visual.stl" />
    <mesh name="right_sho_yaw_link_visual" file="../assemblies/right_arm_umi/meshes/right_sho_yaw_link_visual.stl" />
    <mesh name="right_2xl430_gears_2_visual" file="../assemblies/right_arm_umi/meshes/right_2xl430_gears_2_visual.stl" />
    <mesh name="right_spur_1m_24t_drive_2_visual" file="../assemblies/right_arm_umi/meshes/right_spur_1m_24t_drive_2_visual.stl" />
    <mesh name="right_spur_1m_24t_driven_2_visual" file="../assemblies/right_arm_umi/meshes/right_spur_1m_24t_driven_2_visual.stl" />
    <mesh name="right_elb_yaw_link_visual" file="../assemblies/right_arm_umi/meshes/right_elb_yaw_link_visual.stl" />
    <mesh name="right_spur_1m_24t_driven_3_visual" file="../assemblies/right_arm_umi/meshes/right_spur_1m_24t_driven_3_visual.stl" />
    <mesh name="right_2xl430_gears_3_visual" file="../assemblies/right_arm_umi/meshes/right_2xl430_gears_3_visual.stl" />
    <mesh name="right_spur_1m_24t_drive_3_visual" file="../assemblies/right_arm_umi/meshes/right_spur_1m_24t_drive_3_visual.stl" />
    <mesh name="right_hand_visual" file="../assemblies/right_arm_umi/meshes/right_hand_visual.stl" />
    <mesh name="right_wrist_bearing_plate_visual" file="../assemblies/right_arm_umi/meshes/right_wrist_bearing_plate_visual.stl" />
  
  </asset>

  <worldbody>
    <light pos="0 0 1.5" directional="true"/>
    <geom name="floor" size="2 2 0.01" type="plane" material="grid"/>
    <body name="weld_link0" pos="0 0 0.172" quat="0.707107 0 0 -0.707107">
      <inertial mass="1e-6" pos="0 0 0" diaginertia="1e-6 1e-6 1e-6"/>
      <joint name="weld_joint" type="free"/> <!-- A free joint allows the cube to move freely -->
      <body name="weld_link1" pos="-0.1885 0 0">
        <inertial mass="1e-6" pos="0 0 0" diaginertia=".1e-6 1e-6 1e-6"/>
        <body name="weld_link2" pos="0.14635 0 0.5907">
        <inertial mass="1e-6" pos="0 0 0" diaginertia=".1e-6 1e-6 1e-6"/>
          <body name="weld_link3" pos="-0.1498 0 0.5494">
          <inertial mass="1e-6" pos="0 0 0" diaginertia="1e-6 1e-6 1e-6"/>
            <body name="weld_link4" pos="0 0 0.1498">
            <inertial mass="1e-6" pos="0 0 0" diaginertia="1e-6 1e-6 1e-6"/>
              <body name="weld_link5" pos="-0.1767 0 0">
              <inertial mass="1e-6" pos="0 0 0" diaginertia="1e-6 1e-6 1e-6"/>
                <body name="weld_link6" quat="1 1 0 0">
                <inertial mass="1e-6" pos="0 0 0" diaginertia="1e-6 1e-6 1e-6"/>
                  <body name="weld_body" pos="0 0 0"> <!-- Cube is 0.15m below the attachment point -->
                    <inertial mass=".3" pos="0 0 0" diaginertia=".1 .1 .1"/>
                    <site name="weld_site" pos="0 0 0" rgba="0 1 0 1" size="0.008"/> <!-- Attachment site is 5cm above the cube -->
                  </body>
                </body>
              </body>
            </body>
          </body>
        </body>
      </body>
    </body>
    <body name="toddler" pos="0.05 0 0.336">  <!-- Cube is 0.15m below the attachment point -->
      <joint name="toddler_joint" type="free"/>  <!-- A free joint allows the cube to move freely -->
      <include file="toddlerbot_OP3.xml"/>
    </body>
  </worldbody>
  <sensor>
    <force name="attachment_force" site="attachment_site"/>
  </sensor>
  <keyframe>
    <key name="home" qpos="-0.27106207 -0.44972077  1.85347311  0.24715519 -1.59277597 -3.3671437 -0.063 0 -0.19 0 0 0 0 0.03 0 0.336 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 -0.267268 0.523599 -0.523599 -0.523599 -0.25637 0 0.523599 -0.523599 -0.523599 0 0 0 0.267268 -0.523599 0.523599 0.523599 -0.25637 0 -0.523599 0.523599 0.523599 0.174533 -0.261799 1.0472 -1.0472 0.523599 -1.0472 1.0472 1.309 -1.309 0 -0.174533 -0.261799 -1.0472 1.0472 0.523599 1.0472 -1.0472 -1.309 1.309 0" ctrl="-0.27106207 -0.44972077  1.85347311  0.24715519 -1.59277597 -3.3671437 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0"/>
  </keyframe>
  <equality>
    <!-- tendon attachment equaty -->
    <weld body1="weld_body" body2="attachment"/>
    <!-- toddler equaties -->
    <joint joint1="neck_yaw_driven" joint2="neck_yaw_drive" polycoef="0 -0.722222 0 0 0" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <joint joint1="neck_pitch_driven" joint2="neck_pitch_drive" polycoef="0 -0.909091 0 0 0" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <joint joint1="left_hip_yaw_driven" joint2="left_hip_yaw_drive" polycoef="0 -0.904762 0 0 0" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <joint joint1="right_hip_yaw_driven" joint2="right_hip_yaw_drive" polycoef="0 -0.904762 0 0 0" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <joint joint1="left_sho_yaw_driven" joint2="left_sho_yaw_drive" polycoef="0 -1.0 0 0 0" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <joint joint1="left_elbow_yaw_driven" joint2="left_elbow_yaw_drive" polycoef="0 -1.0 0 0 0" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <joint joint1="left_wrist_pitch_driven" joint2="left_wrist_pitch_drive" polycoef="0 -1.0 0 0 0" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <joint joint1="right_sho_yaw_driven" joint2="right_sho_yaw_drive" polycoef="0 -1.0 0 0 0" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <joint joint1="right_elbow_yaw_driven" joint2="right_elbow_yaw_drive" polycoef="0 -1.0 0 0 0" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <joint joint1="right_wrist_pitch_driven" joint2="right_wrist_pitch_drive" polycoef="0 -1.0 0 0 0" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <weld body1="knee_rod" body2="bearing_683" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <weld body1="knee_rod_2" body2="bearing_683_2" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <weld body1="knee_rod_3" body2="bearing_683_3" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
    <weld body1="knee_rod_4" body2="bearing_683_4" solimp="0.9999 0.9999 0.001 0.5 2" solref="0.004 1" />
  </equality>
  <tendon>
    <!-- toddler tendons -->
    <fixed name="waist_roll_coupling" limited="true" range="-0.03 0.03">
      <joint joint="waist_act_1" coef="0.291667" />
      <joint joint="waist_act_2" coef="-0.291667" />
      <joint joint="waist_roll" coef="1" />
    </fixed>
    <fixed name="waist_yaw_coupling" limited="true" range="-0.001 0.001">
      <joint joint="waist_act_1" coef="-0.208333" />
      <joint joint="waist_act_2" coef="-0.208333" />
      <joint joint="waist_yaw" coef="1" />
    </fixed>
    <spatial name="torso_left_front" limited="true" range="0 0.25" width="0.003" stiffness="500" damping="5">
      <site site="weld_site"/>
      <site site="torso_left_front_site"/> <!-- The cube is attached to the attachment site -->
    </spatial>
    <spatial name="torso_left_hind" limited="true" range="0 0.25" width="0.003" stiffness="500" damping="5">
      <site site="weld_site"/>
      <site site="torso_left_hind_site"/> <!-- The cube is attached to the attachment site -->
    </spatial>
    <spatial name="torso_right_front" limited="true" range="0 0.25" width="0.003" stiffness="500" damping="5">
      <site site="weld_site"/>
      <site site="torso_right_front_site"/> <!-- The cube is attached to the attachment site -->
    </spatial>
    <spatial name="torso_right_hind" limited="true" range="0 0.25" width="0.003" stiffness="500" damping="5">
      <site site="weld_site"/>
      <site site="torso_right_hind_site"/> <!-- The cube is attached to the attachment site -->
    </spatial>
  </tendon>
  <contact>
    <exclude body1="ank_roll_link" body2="ank_roll_link_2" />
    <exclude body1="ank_roll_link_2" body2="ank_roll_link" />
  </contact>
  <actuator>
    <motor name="neck_yaw_drive" joint="neck_yaw_drive" class="XC330" />
    <motor name="neck_pitch_drive" joint="neck_pitch_drive" class="XC330" />
    <motor name="waist_act_1" joint="waist_act_1" class="XC330" />
    <motor name="waist_act_2" joint="waist_act_2" class="XC330" />
    <motor name="left_hip_yaw_drive" joint="left_hip_yaw_drive" class="XC330" />
    <motor name="left_hip_roll" joint="left_hip_roll" class="2XC430" />
    <motor name="left_hip_pitch" joint="left_hip_pitch" class="2XC430" />
    <motor name="left_knee_act" joint="left_knee_act" class="XM430" />
    <motor name="left_ank_roll" joint="left_ank_roll" class="XC430" />
    <motor name="left_ank_pitch" joint="left_ank_pitch" class="XC430" />
    <motor name="right_hip_yaw_drive" joint="right_hip_yaw_drive" class="XC330" />
    <motor name="right_hip_roll" joint="right_hip_roll" class="2XC430" />
    <motor name="right_hip_pitch" joint="right_hip_pitch" class="2XC430" />
    <motor name="right_knee_act" joint="right_knee_act" class="XM430" />
    <motor name="right_ank_roll" joint="right_ank_roll" class="XC430" />
    <motor name="right_ank_pitch" joint="right_ank_pitch" class="XC430" />
    <motor name="left_sho_pitch" joint="left_sho_pitch" class="XC430" />
    <motor name="left_sho_roll" joint="left_sho_roll" class="2XL430" />
    <motor name="left_sho_yaw_drive" joint="left_sho_yaw_drive" class="2XL430" />
    <motor name="left_elbow_roll" joint="left_elbow_roll" class="2XL430" />
    <motor name="left_elbow_yaw_drive" joint="left_elbow_yaw_drive" class="2XL430" />
    <motor name="left_wrist_pitch_drive" joint="left_wrist_pitch_drive" class="2XL430" />
    <motor name="left_wrist_roll" joint="left_wrist_roll" class="2XL430" />
    <motor name="right_sho_pitch" joint="right_sho_pitch" class="XC430" />
    <motor name="right_sho_roll" joint="right_sho_roll" class="2XL430" />
    <motor name="right_sho_yaw_drive" joint="right_sho_yaw_drive" class="2XL430" />
    <motor name="right_elbow_roll" joint="right_elbow_roll" class="2XL430" />
    <motor name="right_elbow_yaw_drive" joint="right_elbow_yaw_drive" class="2XL430" />
    <motor name="right_wrist_pitch_drive" joint="right_wrist_pitch_drive" class="2XL430" />
    <motor name="right_wrist_roll" joint="right_wrist_roll" class="2XL430" />
  </actuator>
  <default>
    <geom type="mesh" solref="0.004 1" />
    <default class="visual">
      <geom type="mesh" contype="0" conaffinity="0" group="2" />
    </default>
    <default class="collision">
      <geom group="3" />
    </default>
    <default class="XM430">
      <motor ctrlrange="-3 3" />
    </default>
    <default class="XC430">
      <motor ctrlrange="-2 2" />
    </default>
    <default class="2XC430">
      <motor ctrlrange="-2 2" />
    </default>
    <default class="2XL430">
      <motor ctrlrange="-2 2" />
    </default>
    <default class="XC330">
      <motor ctrlrange="-1 1" />
    </default>
  </default>
</mujoco>
